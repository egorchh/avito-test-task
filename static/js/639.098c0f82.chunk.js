"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[639],{7682:function(e,t,n){n.d(t,{Z:function(){return c}});n(2791);var r=n(1523);var s=n.p+"static/media/back.352898e9c4744f2293948a36fe22dce9.svg",a=n(184),c=function(){return(0,a.jsx)("div",{children:(0,a.jsxs)(r.rU,{to:"/",className:"back__link",children:[(0,a.jsx)("img",{className:"back__link-img",src:s,alt:"\u0421\u0441\u044b\u043b\u043a\u0430 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430 \u043a \u0433\u043b\u0430\u0432\u043d\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435"}),(0,a.jsx)("p",{className:"back__link-text",children:"Back to main page"})]})})}},4250:function(e,t,n){n.d(t,{Z:function(){return a}});n(2791);var r=n.p+"static/media/refresh.8af170e78212903462f8865a1087397c.svg",s=n(184),a=function(e){var t=e.refreshHandler;return(0,s.jsx)("button",{className:"refresh-button",onClick:t,children:(0,s.jsx)("img",{className:"refresh-button__img",src:r,alt:"\u041a\u043d\u043e\u043f\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u043f\u0438\u0441\u043a\u0430 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432"})})}},926:function(e,t,n){n.d(t,{o:function(){return k}});var r={};n.r(r),n.d(r,{fetchOnePost:function(){return _},fetchPosts:function(){return x}});var s={};n.r(s),n.d(s,{fetchComments:function(){return b}});var a=n(9434),c=n(7781),i=n(8683),o=n(4165),u=n(5861),l=n(1044),m="https://hacker-news.firebaseio.com/v0/",d="".concat(m,"newstories.json"),f="".concat(m,"item/"),p=function(){var e=(0,u.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.get("".concat(f+t,".json"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,u.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.get(d);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=n(6005),x=function(){return function(){var e=(0,u.Z)((0,o.Z)().mark((function e(t){var n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:v.J.FETCH_POSTS}),e.next=4,h();case 4:return n=e.sent,e.next=7,Promise.all(n.slice(0,100).map((function(e){return p(e)})));case 7:r=e.sent,t({type:v.J.FETCH_POSTS_SUCCESS,payload:r}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:v.J.FETCH_POSTS_ERROR,payload:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439"});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},_=function(e){return function(){var t=(0,u.Z)((0,o.Z)().mark((function t(n){var r;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:v.J.FETCH_ONE_POST}),t.next=4,p(e);case 4:r=t.sent,n({type:v.J.FETCH_ONE_POST_SUCCESS,payload:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:v.J.FETCH_ONE_POST_ERROR,payload:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u043e\u0439 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},j=n(9898),y=n(530),b=function(e){return function(){var t=(0,u.Z)((0,o.Z)().mark((function t(n){var r;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:y.z.FETCH_COMMENTS}),t.next=4,Promise.all(e.map((function(e){return(0,j.d7)(e)})));case 4:r=t.sent,n({type:y.z.FETCH_COMMENTS_SUCCESS,payload:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:y.z.FETCH_COMMENTS_ERROR,payload:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},g=(0,i.Z)((0,i.Z)({},r),s),k=function(){var e=(0,a.I0)();return(0,c.DE)(g,e)}},1573:function(e,t,n){n.d(t,{i:function(){return r}});var r=n(9434).v9},9639:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var r=n(2791),s=n(9271),a=n(926),c=n(1573),i=n(1733);var o=n.p+"static/media/link.712190a82944e6028bdbe431cde7228a.svg";function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,a=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);c=!0);}catch(o){i=!0,s=o}finally{try{c||null==n.return||n.return()}finally{if(i)throw s}}return a}}(e,t)||function(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var m=n.p+"static/media/avatar.985329455520e06840a97f748c4de7ab.svg",d=n(9898);var f=n.p+"static/media/arrow-down.bf87b24a35cfcab250ba8964657839da.svg",p=n(184),h=function(e){var t=e.showNestedCommenHandler,n=e.showNestedComments?"expand-button show":"expand-button";return(0,p.jsx)("button",{onClick:t,className:n,children:(0,p.jsx)("img",{className:"expand-button__img",src:f,alt:"\u041a\u043d\u043e\u043f\u043a\u0430 \u0434\u043b\u044f \u043e\u0442\u043a\u0440\u044b\u0442\u0438\u044f \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0445 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432"})})},v=(0,r.memo)((function(e){var t=e.text,n=e.by,s=e.time,a=e.kids,c=e.commentWidth,o=l((0,r.useState)([]),2),u=o[0],f=o[1],x=l((0,r.useState)(!1),2),_=x[0],j=x[1];(0,r.useEffect)((function(){void 0!==a&&(0,d.gO)(a).then((function(e){return f(e)}))}),[]);var y=_?function(e){var t=e.map((function(e){var t=e.id,n=e.text,r=e.by,s=e.time,a=e.kids;return(0,p.jsx)(v,{commentWidth:c-3,kids:a,text:n,by:r,time:s},t)}));return(0,p.jsx)("ul",{className:"comments-list",children:t})}(u):null;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"comments-item",style:{width:"calc(".concat(c,"vw - 40px)")},children:[(0,p.jsxs)("div",{className:"comments-item__wrapper",children:[(0,p.jsxs)("div",{className:"comments-item__user-info",children:[(0,p.jsx)("img",{className:"comments-item__user-avatar",src:m,alt:"\u0410\u0432\u0430\u0442\u0430\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),(0,p.jsx)("p",{className:"comments-item__user-nikname",children:n||"Hidden user"})]}),(0,p.jsx)("p",{className:"comments-item__date",children:(0,i.Y)(s)})]}),(0,p.jsx)("p",{className:"comments-item__text",children:t||"Hidden text"}),u.length>0?(0,p.jsx)(h,{showNestedCommenHandler:function(){j((function(e){return!e}))},showNestedComments:_}):null]}),y]})})),x=v,_=n(6486),j=function(){return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:"skeleton"})})},y=function(e){var t=e.commentsIds,n=(0,c.i)((function(e){return e.comments})),s=n.comments,i=n.loading,o=n.error,u=(0,a.o)().fetchComments;(0,r.useEffect)((function(){u(t)}),[t]);return void 0===t?(0,p.jsx)("div",{className:"comments",children:(0,p.jsx)("p",{className:"comments-absence",children:"There are no comments for this news yet."})}):(0,p.jsxs)("div",{className:"comments",children:[i?(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(j,{})}):function(){var e=s.map((function(e){var t=e.id,n=e.text,r=e.by,s=e.time,a=e.kids;return(0,p.jsx)(x,{kids:a,text:n,by:r,time:s,commentWidth:75},t)}));return(0,p.jsx)("ul",{className:"comments-list",children:e})}(),o?(0,p.jsx)(_.Z,{}):null]})},b=n(7682),g=n(4270),k=n(4250),N=function(e){var t=e.refreshHandler,n=e.descendants;return(0,p.jsxs)("div",{className:"comments-toolkit",children:[(0,p.jsxs)("div",{className:"comments-toolkit__counter",children:[(0,p.jsx)("p",{className:"comments-toolkit__counter-text",children:"Total"}),(0,p.jsx)("div",{className:"comments-toolkit__counter-value",children:n}),(0,p.jsx)("p",{className:"comments-toolkit__counter-text",children:"comments"})]}),(0,p.jsx)(k.Z,{refreshHandler:t})]})},w=function(){var e=(0,c.i)((function(e){return e.posts})),t=e.post,n=e.loading,u=e.error,l=(0,a.o)(),m=l.fetchOnePost,d=l.fetchComments,f=(0,s.UO)().id,h=Number(f);(0,r.useEffect)((function(){m(h)}),[]);return u?(0,p.jsx)(_.Z,{}):(0,p.jsxs)("div",{className:"post-page",children:[(0,p.jsxs)(g.q,{children:[(0,p.jsx)("meta",{name:"description",content:"News title"}),(0,p.jsx)("title",{children:t?t.title:""})]}),(0,p.jsx)(b.Z,{}),n?(0,p.jsx)(j,{}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("a",{rel:"noreferrer",target:"_blank",href:t?t.url:"",className:"post-page__link",children:[(0,p.jsx)("h1",{className:"post-page__title",children:t?t.title:""}),(0,p.jsx)("img",{className:"post-page__link-img",src:o,alt:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a \u043d\u043e\u0432\u043e\u0441\u0442\u0438"})]}),(0,p.jsxs)("div",{className:"post-page__descr-wrapper",children:[(0,p.jsx)("p",{className:"post-page__descr-author",children:t?t.by:""}),(0,p.jsx)("p",{className:"post-page__descr-date",children:(0,i.Y)(t?t.time:0)})]}),(0,p.jsx)(N,{refreshHandler:function(){d(t?t.kids:[])},descendants:t?t.descendants:0})]}),(0,p.jsx)(y,{commentsIds:t?t.kids:[]})]})}},9898:function(e,t,n){n.d(t,{d7:function(){return i},gO:function(){return o}});var r=n(4165),s=n(5861),a=n(1044),c="".concat("https://hacker-news.firebaseio.com/v0/","item/"),i=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.ZP.get("".concat(c+t,".json"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function o(e){return u.apply(this,arguments)}function u(){return(u=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return i(e)})));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1733:function(e,t,n){function r(e){var t=new Date(1e3*e),n=[t.getMonth(),t.getDate(),t.getFullYear()],r=n[0],a=n[1],c=n[2],i=[t.getHours(),t.getMinutes(),t.getSeconds()],o=i[1];return"".concat(s(i[0]),":").concat(s(o)," ").concat(s(a),"/").concat(s(r),"/").concat(c)}function s(e){return e>=0&&e<=9?"0".concat(e):"".concat(e)}n.d(t,{Y:function(){return r}})}}]);
//# sourceMappingURL=639.098c0f82.chunk.js.map